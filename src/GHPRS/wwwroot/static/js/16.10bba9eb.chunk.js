(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{171:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(s){o=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(e,"a",function(){return r})},178:function(t,e,n){"use strict";function r(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var a=t.apply(e,n);function c(t){r(a,o,i,c,s,"next",t)}function s(t){r(a,o,i,c,s,"throw",t)}c(void 0)})}}n.d(e,"a",function(){return o})},211:function(t,e,n){"use strict";var r=n(6),o=n(7),i=n(1),a=n.n(i),c=n(2),s=n.n(c),u=n(8),l=n.n(u),h=n(4),f={tag:h.m,className:s.a.string,cssModule:s.a.object,innerRef:s.a.oneOfType([s.a.object,s.a.string,s.a.func])},p=function(t){var e=t.className,n=t.cssModule,i=t.innerRef,c=t.tag,s=Object(o.a)(t,["className","cssModule","innerRef","tag"]),u=Object(h.i)(l()(e,"card-body"),n);return a.a.createElement(c,Object(r.a)({},s,{className:u,ref:i}))};p.propTypes=f,p.defaultProps={tag:"div"},e.a=p},228:function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"}(r||(r={}))},229:function(t,e,n){"use strict";(function(t,r){n.d(e,"a",function(){return d}),n.d(e,"c",function(){return g}),n.d(e,"f",function(){return v}),n.d(e,"j",function(){return y}),n.d(e,"k",function(){return m}),n.d(e,"e",function(){return _}),n.d(e,"d",function(){return w}),n.d(e,"b",function(){return k}),n.d(e,"i",function(){return E}),n.d(e,"g",function(){return C}),n.d(e,"h",function(){return T});var o=n(5),i=n(171),a=n(37),c=n(178),s=n(17),u=n(18),l=n(228),h=n(452);function f(){f=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(S){c=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new x(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return j()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(S){return{type:"throw",arg:S}}}t.wrap=s;var l={};function h(){}function p(){}function d(){}var g={};c(g,o,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(O([])));y&&y!==e&&n.call(y,o)&&(g=y);var m=d.prototype=h.prototype=Object.create(g);function b(t){["next","throw","return"].forEach(function(e){c(t,e,function(t){return this._invoke(e,t)})})}function _(t,e){var r;this._invoke=function(o,i){function a(){return new e(function(r,a){!function r(o,i,a,c){var s=u(t[o],t,i);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,c)})}c(s.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return p.prototype=d,c(m,"constructor",d),c(d,"constructor",p),p.displayName=c(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},b(_.prototype),c(_.prototype,i,function(){return this}),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},b(m),c(m,a,"Generator"),c(m,o,function(){return this}),c(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}var p="6.0.13",d=function(){function t(){Object(s.a)(this,t)}return Object(u.a)(t,null,[{key:"isRequired",value:function(t,e){if(null===t||void 0===t)throw new Error("The '".concat(e,"' argument is required."))}},{key:"isNotEmpty",value:function(t,e){if(!t||t.match(/^\s*$/))throw new Error("The '".concat(e,"' argument should not be empty."))}},{key:"isIn",value:function(t,e,n){if(!(t in e))throw new Error("Unknown ".concat(n," value: ").concat(t,"."))}}]),t}(),g=function(){function t(){Object(s.a)(this,t)}return Object(u.a)(t,null,[{key:"isBrowser",get:function(){return"object"===typeof window&&"object"===typeof window.document}},{key:"isWebWorker",get:function(){return"object"===typeof self&&"importScripts"in self}},{key:"isReactNative",get:function(){return"object"===typeof window&&"undefined"===typeof window.document}},{key:"isNode",get:function(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}}]),t}();function v(t,e){var n="";return y(t)?(n="Binary data of length ".concat(t.byteLength),e&&(n+=". Content: '".concat(function(t){var e=new Uint8Array(t),n="";return e.forEach(function(t){n+="0x".concat(t<16?"0":"").concat(t.toString(16)," ")}),n.substr(0,n.length-1)}(t),"'"))):"string"===typeof t&&(n="String data of length ".concat(t.length),e&&(n+=". Content: '".concat(t,"'"))),n}function y(t){return t&&"undefined"!==typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function m(t,e,n,r,o,i,a){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(f().mark(function t(e,n,r,c,s,u,h){var p,d,g,m,b,_,w,k;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(p={},!s){t.next=6;break}return t.next=4,s();case 4:(d=t.sent)&&(p=Object(a.a)({},"Authorization","Bearer ".concat(d)));case 6:return g=E(),m=Object(i.a)(g,2),b=m[0],_=m[1],p[b]=_,e.log(l.a.Trace,"(".concat(n," transport) sending data. ").concat(v(u,h.logMessageContent),".")),w=y(u)?"arraybuffer":"text",t.next=12,r.post(c,{content:u,headers:Object(o.a)({},p,h.headers),responseType:w,timeout:h.timeout,withCredentials:h.withCredentials});case 12:k=t.sent,e.log(l.a.Trace,"(".concat(n," transport) request complete. Response status: ").concat(k.statusCode,"."));case 14:case"end":return t.stop()}},t)}))).apply(this,arguments)}function _(t){return void 0===t?new k(l.a.Information):null===t?h.a.instance:void 0!==t.log?t:new k(t)}var w=function(){function t(e,n){Object(s.a)(this,t),this._subject=e,this._observer=n}return Object(u.a)(t,[{key:"dispose",value:function(){var t=this._subject.observers.indexOf(this._observer);t>-1&&this._subject.observers.splice(t,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(function(t){})}}]),t}(),k=function(){function t(e){Object(s.a)(this,t),this._minLevel=e,this.out=console}return Object(u.a)(t,[{key:"log",value:function(t,e){if(t>=this._minLevel){var n="[".concat((new Date).toISOString(),"] ").concat(l.a[t],": ").concat(e);switch(t){case l.a.Critical:case l.a.Error:this.out.error(n);break;case l.a.Warning:this.out.warn(n);break;case l.a.Information:this.out.info(n);break;default:this.out.log(n)}}}}]),t}();function E(){var t="X-SignalR-User-Agent";return g.isNode&&(t="User-Agent"),[t,x(p,O(),S(),j())]}function x(t,e,n,r){var o="Microsoft SignalR/",i=t.split(".");return o+="".concat(i[0],".").concat(i[1]),o+=" (".concat(t,"; "),o+=e&&""!==e?"".concat(e,"; "):"Unknown OS; ",o+="".concat(n),o+=r?"; ".concat(r):"; Unknown Runtime Version",o+=")"}function O(){if(!g.isNode)return"";switch(t.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return t.platform}}function j(){if(g.isNode)return t.versions.node}function S(){return g.isNode?"NodeJS":"Browser"}function C(t){return t.stack?t.stack:t.message?t.message:"".concat(t)}function T(){if("undefined"!==typeof globalThis)return globalThis;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r)return r;throw new Error("could not find global")}}).call(this,n(81),n(82))},449:function(t,e,n){"use strict";var r=n(6),o=n(7),i=n(1),a=n.n(i),c=n(2),s=n.n(c),u=n(8),l=n.n(u),h=n(4),f={tag:h.m,wrapTag:h.m,toggle:s.a.func,className:s.a.string,cssModule:s.a.object,children:s.a.node,closeAriaLabel:s.a.string,charCode:s.a.oneOfType([s.a.string,s.a.number]),close:s.a.object},p=function(t){var e,n=t.className,i=t.cssModule,c=t.children,s=t.toggle,u=t.tag,f=t.wrapTag,p=t.closeAriaLabel,d=t.charCode,g=t.close,v=Object(o.a)(t,["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel","charCode","close"]),y=Object(h.i)(l()(n,"modal-header"),i);if(!g&&s){var m="number"===typeof d?String.fromCharCode(d):d;e=a.a.createElement("button",{type:"button",onClick:s,className:Object(h.i)("close",i),"aria-label":p},a.a.createElement("span",{"aria-hidden":"true"},m))}return a.a.createElement(f,Object(r.a)({},v,{className:y}),a.a.createElement(u,{className:Object(h.i)("modal-title",i)},c),g||e)};p.propTypes=f,p.defaultProps={tag:"h5",wrapTag:"div",closeAriaLabel:"Close",charCode:215},e.a=p},450:function(t,e,n){"use strict";var r=n(6),o=n(7),i=n(1),a=n.n(i),c=n(2),s=n.n(c),u=n(8),l=n.n(u),h=n(4),f={tag:h.m,className:s.a.string,cssModule:s.a.object},p=function(t){var e=t.className,n=t.cssModule,i=t.tag,c=Object(o.a)(t,["className","cssModule","tag"]),s=Object(h.i)(l()(e,"modal-body"),n);return a.a.createElement(i,Object(r.a)({},c,{className:s}))};p.propTypes=f,p.defaultProps={tag:"div"},e.a=p},451:function(t,e,n){"use strict";var r=n(6),o=n(7),i=n(1),a=n.n(i),c=n(2),s=n.n(c),u=n(8),l=n.n(u),h=n(4),f={tag:h.m,className:s.a.string,cssModule:s.a.object},p=function(t){var e=t.className,n=t.cssModule,i=t.tag,c=Object(o.a)(t,["className","cssModule","tag"]),s=Object(h.i)(l()(e,"modal-footer"),n);return a.a.createElement(i,Object(r.a)({},c,{className:s}))};p.propTypes=f,p.defaultProps={tag:"div"},e.a=p},452:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(17),o=n(18),i=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"log",value:function(t,e){}}]),t}();i.instance=new i},472:function(t,e,n){"use strict";var r=n(39),o=n(6),i=n(24),a=n(13),c=n(1),s=n.n(c),u=n(2),l=n.n(u),h=n(8),f=n.n(h),p=n(16),d=n.n(p),g=n(4),v={children:l.a.node.isRequired,node:l.a.any},y=function(t){function e(){return t.apply(this,arguments)||this}Object(i.a)(e,t);var n=e.prototype;return n.componentWillUnmount=function(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null},n.render=function(){return g.d?(this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),d.a.createPortal(this.props.children,this.props.node||this.defaultNode)):null},e}(s.a.Component);y.propTypes=v;var m=y,b=n(7),_=n(40),w=Object(r.a)({},_.Transition.propTypes,{children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]),tag:g.m,baseClass:l.a.string,baseClassActive:l.a.string,className:l.a.string,cssModule:l.a.object,innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])}),k=Object(r.a)({},_.Transition.defaultProps,{tag:"div",baseClass:"fade",baseClassActive:"show",timeout:g.c.Fade,appear:!0,enter:!0,exit:!0,in:!0});function E(t){var e=t.tag,n=t.baseClass,r=t.baseClassActive,i=t.className,a=t.cssModule,c=t.children,u=t.innerRef,l=Object(b.a)(t,["tag","baseClass","baseClassActive","className","cssModule","children","innerRef"]),h=Object(g.k)(l,g.a),p=Object(g.j)(l,g.a);return s.a.createElement(_.Transition,h,function(t){var l="entered"===t,h=Object(g.i)(f()(i,n,l&&r),a);return s.a.createElement(e,Object(o.a)({className:h},p,{ref:u}),c)})}E.propTypes=w,E.defaultProps=k;var x=E;function O(){}var j=l.a.shape(x.propTypes),S={isOpen:l.a.bool,autoFocus:l.a.bool,centered:l.a.bool,size:l.a.string,toggle:l.a.func,keyboard:l.a.bool,role:l.a.string,labelledBy:l.a.string,backdrop:l.a.oneOfType([l.a.bool,l.a.oneOf(["static"])]),onEnter:l.a.func,onExit:l.a.func,onOpened:l.a.func,onClosed:l.a.func,children:l.a.node,className:l.a.string,wrapClassName:l.a.string,modalClassName:l.a.string,backdropClassName:l.a.string,contentClassName:l.a.string,external:l.a.node,fade:l.a.bool,cssModule:l.a.object,zIndex:l.a.oneOfType([l.a.number,l.a.string]),backdropTransition:j,modalTransition:j,innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])},C=Object.keys(S),T={isOpen:!1,autoFocus:!0,centered:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:O,onClosed:O,modalTransition:{timeout:g.c.Modal},backdropTransition:{mountOnEnter:!0,timeout:g.c.Fade}},L=function(t){function e(e){var n;return(n=t.call(this,e)||this)._element=null,n._originalBodyPadding=null,n.getFocusableChildren=n.getFocusableChildren.bind(Object(a.a)(Object(a.a)(n))),n.handleBackdropClick=n.handleBackdropClick.bind(Object(a.a)(Object(a.a)(n))),n.handleBackdropMouseDown=n.handleBackdropMouseDown.bind(Object(a.a)(Object(a.a)(n))),n.handleEscape=n.handleEscape.bind(Object(a.a)(Object(a.a)(n))),n.handleTab=n.handleTab.bind(Object(a.a)(Object(a.a)(n))),n.onOpened=n.onOpened.bind(Object(a.a)(Object(a.a)(n))),n.onClosed=n.onClosed.bind(Object(a.a)(Object(a.a)(n))),n.state={isOpen:e.isOpen},e.isOpen&&n.init(),n}Object(i.a)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.props.onEnter&&this.props.onEnter(),this.state.isOpen&&this.props.autoFocus&&this.setFocus(),this._isMounted=!0},n.componentWillReceiveProps=function(t){t.isOpen&&!this.props.isOpen&&this.setState({isOpen:t.isOpen})},n.componentWillUpdate=function(t,e){e.isOpen&&!this.state.isOpen&&this.init()},n.componentDidUpdate=function(t,e){this.props.autoFocus&&this.state.isOpen&&!e.isOpen&&this.setFocus(),this._element&&t.zIndex!==this.props.zIndex&&(this._element.style.zIndex=this.props.zIndex)},n.componentWillUnmount=function(){this.props.onExit&&this.props.onExit(),this.state.isOpen&&this.destroy(),this._isMounted=!1},n.onOpened=function(t,e){this.props.onOpened(),(this.props.modalTransition.onEntered||O)(t,e)},n.onClosed=function(t){this.props.onClosed(),(this.props.modalTransition.onExited||O)(t),this.destroy(),this._isMounted&&this.setState({isOpen:!1})},n.setFocus=function(){this._dialog&&this._dialog.parentNode&&"function"===typeof this._dialog.parentNode.focus&&this._dialog.parentNode.focus()},n.getFocusableChildren=function(){return this._element.querySelectorAll(g.g.join(", "))},n.getFocusedChild=function(){var t,e=this.getFocusableChildren();try{t=document.activeElement}catch(n){t=e[0]}return t},n.handleBackdropClick=function(t){if(t.target===this._mouseDownElement){if(t.stopPropagation(),!this.props.isOpen||!0!==this.props.backdrop)return;var e=this._dialog?this._dialog.parentNode:null;e&&t.target===e&&this.props.toggle&&this.props.toggle(t)}},n.handleTab=function(t){if(9===t.which){for(var e=this.getFocusableChildren(),n=e.length,r=this.getFocusedChild(),o=0,i=0;i<n;i+=1)if(e[i]===r){o=i;break}t.shiftKey&&0===o?(t.preventDefault(),e[n-1].focus()):t.shiftKey||o!==n-1||(t.preventDefault(),e[0].focus())}},n.handleBackdropMouseDown=function(t){this._mouseDownElement=t.target},n.handleEscape=function(t){this.props.isOpen&&this.props.keyboard&&27===t.keyCode&&this.props.toggle&&(t.preventDefault(),t.stopPropagation(),this.props.toggle(t))},n.init=function(){try{this._triggeringElement=document.activeElement}catch(t){this._triggeringElement=null}this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._originalBodyPadding=Object(g.h)(),Object(g.e)(),document.body.appendChild(this._element),0===e.openCount&&(document.body.className=f()(document.body.className,Object(g.i)("modal-open",this.props.cssModule))),e.openCount+=1},n.destroy=function(){if(this._element&&(document.body.removeChild(this._element),this._element=null),this._triggeringElement&&(this._triggeringElement.focus&&this._triggeringElement.focus(),this._triggeringElement=null),e.openCount<=1){var t=Object(g.i)("modal-open",this.props.cssModule),n=new RegExp("(^| )"+t+"( |$)");document.body.className=document.body.className.replace(n," ").trim()}e.openCount-=1,Object(g.l)(this._originalBodyPadding)},n.renderModalDialog=function(){var t,e=this,n=Object(g.j)(this.props,C);return s.a.createElement("div",Object(o.a)({},n,{className:Object(g.i)(f()("modal-dialog",this.props.className,(t={},t["modal-"+this.props.size]=this.props.size,t["modal-dialog-centered"]=this.props.centered,t)),this.props.cssModule),role:"document",ref:function(t){e._dialog=t}}),s.a.createElement("div",{className:Object(g.i)(f()("modal-content",this.props.contentClassName),this.props.cssModule)},this.props.children))},n.render=function(){if(this.state.isOpen){var t=this.props,e=t.wrapClassName,n=t.modalClassName,i=t.backdropClassName,a=t.cssModule,c=t.isOpen,u=t.backdrop,l=t.role,h=t.labelledBy,p=t.external,d=t.innerRef,v={onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown,onKeyUp:this.handleEscape,onKeyDown:this.handleTab,style:{display:"block"},"aria-labelledby":h,role:l,tabIndex:"-1"},y=this.props.fade,b=Object(r.a)({},x.defaultProps,this.props.modalTransition,{baseClass:y?this.props.modalTransition.baseClass:"",timeout:y?this.props.modalTransition.timeout:0}),_=Object(r.a)({},x.defaultProps,this.props.backdropTransition,{baseClass:y?this.props.backdropTransition.baseClass:"",timeout:y?this.props.backdropTransition.timeout:0}),w=u&&(y?s.a.createElement(x,Object(o.a)({},_,{in:c&&!!u,cssModule:a,className:Object(g.i)(f()("modal-backdrop",i),a)})):s.a.createElement("div",{className:Object(g.i)(f()("modal-backdrop","show",i),a)}));return s.a.createElement(m,{node:this._element},s.a.createElement("div",{className:Object(g.i)(e)},s.a.createElement(x,Object(o.a)({},v,b,{in:c,onEntered:this.onOpened,onExited:this.onClosed,cssModule:a,className:Object(g.i)(f()("modal",n),a),innerRef:d}),p,this.renderModalDialog()),w))}return null},e}(s.a.Component);L.propTypes=S,L.defaultProps=T,L.openCount=0;e.a=L},845:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0);function o(t){return Object(r.a)({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"g",attr:{fill:"#9C27B0"},child:[{tag:"polygon",attr:{points:"31,8 42.9,9.6 33.1,19.4"}},{tag:"polygon",attr:{points:"17,40 5.1,38.4 14.9,28.6"}},{tag:"polygon",attr:{points:"8,17 9.6,5.1 19.4,14.9"}},{tag:"path",attr:{d:"M9.3,21.2L5.1,22C5,22.7,5,23.3,5,24c0,4.6,1.6,9,4.6,12.4l3-2.6C10.3,31.1,9,27.6,9,24 C9,23.1,9.1,22.1,9.3,21.2z"}},{tag:"path",attr:{d:"M24,5c-5.4,0-10.2,2.3-13.7,5.9l2.8,2.8C15.9,10.8,19.7,9,24,9c0.9,0,1.9,0.1,2.8,0.3l0.7-3.9 C26.4,5.1,25.2,5,24,5z"}},{tag:"path",attr:{d:"M38.7,26.8l4.2-0.8c0.1-0.7,0.1-1.3,0.1-2c0-4.4-1.5-8.7-4.3-12.1l-3.1,2.5c2.2,2.7,3.4,6.1,3.4,9.5 C39,24.9,38.9,25.9,38.7,26.8z"}},{tag:"path",attr:{d:"M34.9,34.3C32.1,37.2,28.3,39,24,39c-0.9,0-1.9-0.1-2.8-0.3l-0.7,3.9c1.2,0.2,2.4,0.3,3.5,0.3 c5.4,0,10.2-2.3,13.7-5.9L34.9,34.3z"}},{tag:"polygon",attr:{points:"40,31 38.4,42.9 28.6,33.1"}}]}]})(t)}},946:function(t,e,n){"use strict";var r=n(5),o=n(17),i=n(18),a=n(11),c=[0,2e3,1e4,3e4,null],s=function(){function t(e){Object(o.a)(this,t),this._retryDelays=void 0!==e?[].concat(Object(a.a)(e),[null]):c}return Object(i.a)(t,[{key:"nextRetryDelayInMilliseconds",value:function(t){return this._retryDelays[t.previousRetryCount]}}]),t}(),u=n(171),l=n(178),h=n(21),f=n(19),p=n(20),d=n(59);function g(t,e,n){return(g=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&Object(d.a)(o,n.prototype),o}).apply(null,arguments)}function v(t){var e="function"===typeof Map?new Map:void 0;return(v=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return g(t,arguments,Object(f.a)(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object(d.a)(r,t)})(t)}var y=function(t){function e(t,n){var r;Object(o.a)(this,e);var i=(this instanceof e?this.constructor:void 0).prototype;return(r=Object(h.a)(this,Object(f.a)(e).call(this,"".concat(t,": Status code '").concat(n,"'")))).statusCode=n,r.__proto__=i,r}return Object(p.a)(e,t),e}(v(Error)),m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A timeout occurred.";Object(o.a)(this,e);var r=(this instanceof e?this.constructor:void 0).prototype;return(t=Object(h.a)(this,Object(f.a)(e).call(this,n))).__proto__=r,t}return Object(p.a)(e,t),e}(v(Error)),b=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An abort occurred.";Object(o.a)(this,e);var r=(this instanceof e?this.constructor:void 0).prototype;return(t=Object(h.a)(this,Object(f.a)(e).call(this,n))).__proto__=r,t}return Object(p.a)(e,t),e}(v(Error)),_=function(t){function e(t,n){var r;Object(o.a)(this,e);var i=(this instanceof e?this.constructor:void 0).prototype;return(r=Object(h.a)(this,Object(f.a)(e).call(this,t))).transport=n,r.errorType="UnsupportedTransportError",r.__proto__=i,r}return Object(p.a)(e,t),e}(v(Error)),w=function(t){function e(t,n){var r;Object(o.a)(this,e);var i=(this instanceof e?this.constructor:void 0).prototype;return(r=Object(h.a)(this,Object(f.a)(e).call(this,t))).transport=n,r.errorType="DisabledTransportError",r.__proto__=i,r}return Object(p.a)(e,t),e}(v(Error)),k=function(t){function e(t,n){var r;Object(o.a)(this,e);var i=(this instanceof e?this.constructor:void 0).prototype;return(r=Object(h.a)(this,Object(f.a)(e).call(this,t))).transport=n,r.errorType="FailedToStartTransportError",r.__proto__=i,r}return Object(p.a)(e,t),e}(v(Error)),E=function(t){function e(t){var n;Object(o.a)(this,e);var r=(this instanceof e?this.constructor:void 0).prototype;return(n=Object(h.a)(this,Object(f.a)(e).call(this,t))).errorType="FailedToNegotiateWithServerError",n.__proto__=r,n}return Object(p.a)(e,t),e}(v(Error)),x=function(t){function e(t,n){var r;Object(o.a)(this,e);var i=(this instanceof e?this.constructor:void 0).prototype;return(r=Object(h.a)(this,Object(f.a)(e).call(this,t))).innerErrors=n,r.__proto__=i,r}return Object(p.a)(e,t),e}(v(Error)),O=function t(e,n,r){Object(o.a)(this,t),this.statusCode=e,this.statusText=n,this.content=r},j=function(){function t(){Object(o.a)(this,t)}return Object(i.a)(t,[{key:"get",value:function(t,e){return this.send(Object(r.a)({},e,{method:"GET",url:t}))}},{key:"post",value:function(t,e){return this.send(Object(r.a)({},e,{method:"POST",url:t}))}},{key:"delete",value:function(t,e){return this.send(Object(r.a)({},e,{method:"DELETE",url:t}))}},{key:"getCookieString",value:function(t){return""}}]),t}(),S=n(228),C=n(229);function T(){T=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(j){c=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new E(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return O()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=_(a,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(j){return{type:"throw",arg:j}}}t.wrap=s;var l={};function h(){}function f(){}function p(){}var d={};c(d,o,function(){return this});var g=Object.getPrototypeOf,v=g&&g(g(x([])));v&&v!==e&&n.call(v,o)&&(d=v);var y=p.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){c(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e(function(r,a){!function r(o,i,a,c){var s=u(t[o],t,i);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,c)})}c(s.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),c(b.prototype,i,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(y),c(y,a,"Generator"),c(y,o,function(){return this}),c(y,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}var L=function(t){function e(t){var n;if(Object(o.a)(this,e),(n=Object(h.a)(this,Object(f.a)(e).call(this)))._logger=t,"undefined"===typeof fetch){var r=require;n._jar=new(r("tough-cookie").CookieJar),n._fetchType=r("node-fetch"),n._fetchType=r("fetch-cookie")(n._fetchType,n._jar)}else n._fetchType=fetch.bind(Object(C.h)());if("undefined"===typeof AbortController){var i=require;n._abortControllerType=i("abort-controller")}else n._abortControllerType=AbortController;return n}return Object(p.a)(e,t),Object(i.a)(e,[{key:"send",value:function(){var t=Object(l.a)(T().mark(function t(e){var n,o,i,a,c,s,u,l,h=this;return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.abortSignal||!e.abortSignal.aborted){t.next=2;break}throw new b;case 2:if(e.method){t.next=4;break}throw new Error("No method defined.");case 4:if(e.url){t.next=6;break}throw new Error("No url defined.");case 6:return n=new this._abortControllerType,e.abortSignal&&(e.abortSignal.onabort=function(){n.abort(),o=new b}),i=null,e.timeout&&(a=e.timeout,i=setTimeout(function(){n.abort(),h._logger.log(S.a.Warning,"Timeout from HTTP request."),o=new m},a)),t.prev=10,t.next=13,this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:!0===e.withCredentials?"include":"same-origin",headers:Object(r.a)({"Content-Type":"text/plain;charset=UTF-8","X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,mode:"cors",redirect:"follow",signal:n.signal});case 13:c=t.sent,t.next=22;break;case 16:if(t.prev=16,t.t0=t.catch(10),!o){t.next=20;break}throw o;case 20:throw this._logger.log(S.a.Warning,"Error from HTTP request. ".concat(t.t0,".")),t.t0;case 22:return t.prev=22,i&&clearTimeout(i),e.abortSignal&&(e.abortSignal.onabort=null),t.finish(22);case 26:if(c.ok){t.next=31;break}return t.next=29,I(c,"text");case 29:throw s=t.sent,new y(s||c.statusText,c.status);case 31:return u=I(c,e.responseType),t.next=34,u;case 34:return l=t.sent,t.abrupt("return",new O(c.status,c.statusText,l));case 36:case"end":return t.stop()}},t,this,[[10,16,22,26]])}));return function(e){return t.apply(this,arguments)}}()},{key:"getCookieString",value:function(t){var e="";return C.c.isNode&&this._jar&&this._jar.getCookies(t,function(t,n){return e=n.join("; ")}),e}}]),e}(j);function I(t,e){var n;switch(e){case"arraybuffer":n=t.arrayBuffer();break;case"text":n=t.text();break;case"blob":case"document":case"json":throw new Error("".concat(e," is not supported."));default:n=t.text()}return n}var P,N,D=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(h.a)(this,Object(f.a)(e).call(this)))._logger=t,n}return Object(p.a)(e,t),Object(i.a)(e,[{key:"send",value:function(t){var e=this;return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new b):t.method?t.url?new Promise(function(n,r){var o=new XMLHttpRequest;o.open(t.method,t.url,!0),o.withCredentials=void 0===t.withCredentials||t.withCredentials,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-Type","text/plain;charset=UTF-8");var i=t.headers;i&&Object.keys(i).forEach(function(t){o.setRequestHeader(t,i[t])}),t.responseType&&(o.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=function(){o.abort(),r(new b)}),t.timeout&&(o.timeout=t.timeout),o.onload=function(){t.abortSignal&&(t.abortSignal.onabort=null),o.status>=200&&o.status<300?n(new O(o.status,o.statusText,o.response||o.responseText)):r(new y(o.response||o.responseText||o.statusText,o.status))},o.onerror=function(){e._logger.log(S.a.Warning,"Error from HTTP request. ".concat(o.status,": ").concat(o.statusText,".")),r(new y(o.statusText,o.status))},o.ontimeout=function(){e._logger.log(S.a.Warning,"Timeout from HTTP request."),r(new m)},o.send(t.content||"")}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}]),e}(j),R=function(t){function e(t){var n;if(Object(o.a)(this,e),n=Object(h.a)(this,Object(f.a)(e).call(this)),"undefined"!==typeof fetch||C.c.isNode)n._httpClient=new L(t);else{if("undefined"===typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");n._httpClient=new D(t)}return n}return Object(p.a)(e,t),Object(i.a)(e,[{key:"send",value:function(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new b):t.method?t.url?this._httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}},{key:"getCookieString",value:function(t){return this._httpClient.getCookieString(t)}}]),e}(j),A=function t(){Object(o.a)(this,t)};A.Authorization="Authorization",A.Cookie="Cookie",function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"}(P||(P={})),function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"}(N||(N={}));var M=n(37),F=function(){function t(){Object(o.a)(this,t),this._isAborted=!1,this.onabort=null}return Object(i.a)(t,[{key:"abort",value:function(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}},{key:"signal",get:function(){return this}},{key:"aborted",get:function(){return this._isAborted}}]),t}();function H(){H=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(j){c=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new E(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return O()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=_(a,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(j){return{type:"throw",arg:j}}}t.wrap=s;var l={};function h(){}function f(){}function p(){}var d={};c(d,o,function(){return this});var g=Object.getPrototypeOf,v=g&&g(g(x([])));v&&v!==e&&n.call(v,o)&&(d=v);var y=p.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){c(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e(function(r,a){!function r(o,i,a,c){var s=u(t[o],t,i);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,c)})}c(s.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),c(b.prototype,i,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(y),c(y,a,"Generator"),c(y,o,function(){return this}),c(y,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}var W=function(){function t(e,n,r,i){Object(o.a)(this,t),this._httpClient=e,this._accessTokenFactory=n,this._logger=r,this._pollAbort=new F,this._options=i,this._running=!1,this.onreceive=null,this.onclose=null}return Object(i.a)(t,[{key:"connect",value:function(){var t=Object(l.a)(H().mark(function t(e,n){var o,i,a,c,s,l,h,f,p;return H().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(C.a.isRequired(e,"url"),C.a.isRequired(n,"transferFormat"),C.a.isIn(n,N,"transferFormat"),this._url=e,this._logger.log(S.a.Trace,"(LongPolling transport) Connecting."),n!==N.Binary||"undefined"===typeof XMLHttpRequest||"string"===typeof(new XMLHttpRequest).responseType){t.next=7;break}throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");case 7:return o=Object(C.i)(),i=Object(u.a)(o,2),a=i[0],c=i[1],s=Object(r.a)(Object(M.a)({},a,c),this._options.headers),l={abortSignal:this._pollAbort.signal,headers:s,timeout:1e5,withCredentials:this._options.withCredentials},n===N.Binary&&(l.responseType="arraybuffer"),t.next=13,this._getAccessToken();case 13:return h=t.sent,this._updateHeaderToken(l,h),f="".concat(e,"&_=").concat(Date.now()),this._logger.log(S.a.Trace,"(LongPolling transport) polling: ".concat(f,".")),t.next=19,this._httpClient.get(f,l);case 19:200!==(p=t.sent).statusCode?(this._logger.log(S.a.Error,"(LongPolling transport) Unexpected response code: ".concat(p.statusCode,".")),this._closeError=new y(p.statusText||"",p.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,l);case 22:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"_getAccessToken",value:function(){var t=Object(l.a)(H().mark(function t(){return H().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._accessTokenFactory){t.next=4;break}return t.next=3,this._accessTokenFactory();case 3:return t.abrupt("return",t.sent);case 4:return t.abrupt("return",null);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"_updateHeaderToken",value:function(t,e){t.headers||(t.headers={}),e?t.headers[A.Authorization]="Bearer ".concat(e):t.headers[A.Authorization]&&delete t.headers[A.Authorization]}},{key:"_poll",value:function(){var t=Object(l.a)(H().mark(function t(e,n){var r,o,i;return H().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0;case 1:if(!this._running){t.next=20;break}return t.next=4,this._getAccessToken();case 4:return r=t.sent,this._updateHeaderToken(n,r),t.prev=6,o="".concat(e,"&_=").concat(Date.now()),this._logger.log(S.a.Trace,"(LongPolling transport) polling: ".concat(o,".")),t.next=11,this._httpClient.get(o,n);case 11:204===(i=t.sent).statusCode?(this._logger.log(S.a.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):200!==i.statusCode?(this._logger.log(S.a.Error,"(LongPolling transport) Unexpected response code: ".concat(i.statusCode,".")),this._closeError=new y(i.statusText||"",i.statusCode),this._running=!1):i.content?(this._logger.log(S.a.Trace,"(LongPolling transport) data received. ".concat(Object(C.f)(i.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(i.content)):this._logger.log(S.a.Trace,"(LongPolling transport) Poll timed out, reissuing."),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(6),this._running?t.t0 instanceof m?this._logger.log(S.a.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=t.t0,this._running=!1):this._logger.log(S.a.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(t.t0.message));case 18:t.next=1;break;case 20:return t.prev=20,this._logger.log(S.a.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose(),t.finish(20);case 24:case"end":return t.stop()}},t,this,[[0,,20,24],[6,15]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"send",value:function(){var t=Object(l.a)(H().mark(function t(e){return H().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._running){t.next=2;break}return t.abrupt("return",Promise.reject(new Error("Cannot send until the transport is connected")));case 2:return t.abrupt("return",Object(C.k)(this._logger,"LongPolling",this._httpClient,this._url,this._accessTokenFactory,e,this._options));case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"stop",value:function(){var t=Object(l.a)(H().mark(function t(){var e,n,o,i,a,c,s;return H().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._logger.log(S.a.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort(),t.prev=3,t.next=6,this._receiving;case 6:return this._logger.log(S.a.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,".")),e={},n=Object(C.i)(),o=Object(u.a)(n,2),i=o[0],a=o[1],e[i]=a,c={headers:Object(r.a)({},e,this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials},t.next=13,this._getAccessToken();case 13:return s=t.sent,this._updateHeaderToken(c,s),t.next=17,this._httpClient.delete(this._url,c);case 17:this._logger.log(S.a.Trace,"(LongPolling transport) DELETE request sent.");case 18:return t.prev=18,this._logger.log(S.a.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose(),t.finish(18);case 22:case"end":return t.stop()}},t,this,[[3,,18,22]])}));return function(){return t.apply(this,arguments)}}()},{key:"_raiseOnClose",value:function(){if(this.onclose){var t="(LongPolling transport) Firing onclose event.";this._closeError&&(t+=" Error: "+this._closeError),this._logger.log(S.a.Trace,t),this.onclose(this._closeError)}}},{key:"pollAborted",get:function(){return this._pollAbort.aborted}}]),t}();function G(){G=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(j){c=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new E(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return O()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=_(a,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(j){return{type:"throw",arg:j}}}t.wrap=s;var l={};function h(){}function f(){}function p(){}var d={};c(d,o,function(){return this});var g=Object.getPrototypeOf,v=g&&g(g(x([])));v&&v!==e&&n.call(v,o)&&(d=v);var y=p.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){c(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e(function(r,a){!function r(o,i,a,c){var s=u(t[o],t,i);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,c)})}c(s.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),c(b.prototype,i,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(y),c(y,a,"Generator"),c(y,o,function(){return this}),c(y,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}var U=function(){function t(e,n,r,i){Object(o.a)(this,t),this._httpClient=e,this._accessTokenFactory=n,this._logger=r,this._options=i,this.onreceive=null,this.onclose=null}return Object(i.a)(t,[{key:"connect",value:function(){var t=Object(l.a)(G().mark(function t(e,n){var o,i=this;return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(C.a.isRequired(e,"url"),C.a.isRequired(n,"transferFormat"),C.a.isIn(n,N,"transferFormat"),this._logger.log(S.a.Trace,"(SSE transport) Connecting."),this._url=e,!this._accessTokenFactory){t.next=10;break}return t.next=8,this._accessTokenFactory();case 8:(o=t.sent)&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(o)));case 10:return t.abrupt("return",new Promise(function(t,o){var a=!1;if(n===N.Text){var c;if(C.c.isBrowser||C.c.isWebWorker)c=new i._options.EventSource(e,{withCredentials:i._options.withCredentials});else{var s=i._httpClient.getCookieString(e),l={};l.Cookie=s;var h=Object(C.i)(),f=Object(u.a)(h,2),p=f[0],d=f[1];l[p]=d,c=new i._options.EventSource(e,{withCredentials:i._options.withCredentials,headers:Object(r.a)({},l,i._options.headers)})}try{c.onmessage=function(t){if(i.onreceive)try{i._logger.log(S.a.Trace,"(SSE transport) data received. ".concat(Object(C.f)(t.data,i._options.logMessageContent),".")),i.onreceive(t.data)}catch(e){return void i._close(e)}},c.onerror=function(t){a?i._close():o(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},c.onopen=function(){i._logger.log(S.a.Information,"SSE connected to ".concat(i._url)),i._eventSource=c,a=!0,t()}}catch(g){return void o(g)}}else o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}));case 11:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"send",value:function(){var t=Object(l.a)(G().mark(function t(e){return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._eventSource){t.next=2;break}return t.abrupt("return",Promise.reject(new Error("Cannot send until the transport is connected")));case 2:return t.abrupt("return",Object(C.k)(this._logger,"SSE",this._httpClient,this._url,this._accessTokenFactory,e,this._options));case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"stop",value:function(){return this._close(),Promise.resolve()}},{key:"_close",value:function(t){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(t))}}]),t}();function B(){B=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(j){c=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new E(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return O()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=_(a,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(j){return{type:"throw",arg:j}}}t.wrap=s;var l={};function h(){}function f(){}function p(){}var d={};c(d,o,function(){return this});var g=Object.getPrototypeOf,v=g&&g(g(x([])));v&&v!==e&&n.call(v,o)&&(d=v);var y=p.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){c(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e(function(r,a){!function r(o,i,a,c){var s=u(t[o],t,i);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,c)})}c(s.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),c(b.prototype,i,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(y),c(y,a,"Generator"),c(y,o,function(){return this}),c(y,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}var q=function(){function t(e,n,r,i,a,c){Object(o.a)(this,t),this._logger=r,this._accessTokenFactory=n,this._logMessageContent=i,this._webSocketConstructor=a,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=c}return Object(i.a)(t,[{key:"connect",value:function(){var t=Object(l.a)(B().mark(function t(e,n){var o,i=this;return B().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(C.a.isRequired(e,"url"),C.a.isRequired(n,"transferFormat"),C.a.isIn(n,N,"transferFormat"),this._logger.log(S.a.Trace,"(WebSockets transport) Connecting."),!this._accessTokenFactory){t.next=9;break}return t.next=7,this._accessTokenFactory();case 7:(o=t.sent)&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(o)));case 9:return t.abrupt("return",new Promise(function(t,o){var a;e=e.replace(/^http/,"ws");var c=i._httpClient.getCookieString(e),s=!1;if(C.c.isNode){var l={},h=Object(C.i)(),f=Object(u.a)(h,2),p=f[0],d=f[1];l[p]=d,c&&(l[A.Cookie]="".concat(c)),a=new i._webSocketConstructor(e,void 0,{headers:Object(r.a)({},l,i._headers)})}a||(a=new i._webSocketConstructor(e)),n===N.Binary&&(a.binaryType="arraybuffer"),a.onopen=function(n){i._logger.log(S.a.Information,"WebSocket connected to ".concat(e,".")),i._webSocket=a,s=!0,t()},a.onerror=function(t){var e=null;e="undefined"!==typeof ErrorEvent&&t instanceof ErrorEvent?t.error:"There was an error with the transport",i._logger.log(S.a.Information,"(WebSockets transport) ".concat(e,"."))},a.onmessage=function(t){if(i._logger.log(S.a.Trace,"(WebSockets transport) data received. ".concat(Object(C.f)(t.data,i._logMessageContent),".")),i.onreceive)try{i.onreceive(t.data)}catch(e){return void i._close(e)}},a.onclose=function(t){if(s)i._close(t);else{var e=null;e="undefined"!==typeof ErrorEvent&&t instanceof ErrorEvent?t.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",o(new Error(e))}}}));case 10:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"send",value:function(t){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(S.a.Trace,"(WebSockets transport) sending data. ".concat(Object(C.f)(t,this._logMessageContent),".")),this._webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}},{key:"stop",value:function(){return this._webSocket&&this._close(void 0),Promise.resolve()}},{key:"_close",value:function(t){this._webSocket&&(this._webSocket.onclose=function(){},this._webSocket.onmessage=function(){},this._webSocket.onerror=function(){},this._webSocket.close(),this._webSocket=void 0),this._logger.log(S.a.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(t)||!1!==t.wasClean&&1e3===t.code?t instanceof Error?this.onclose(t):this.onclose():this.onclose(new Error("WebSocket closed with status code: ".concat(t.code," (").concat(t.reason||"no reason given",")."))))}},{key:"_isCloseEvent",value:function(t){return t&&"boolean"===typeof t.wasClean&&"number"===typeof t.code}}]),t}();function z(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K(){K=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(j){c=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new E(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return O()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=_(a,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(j){return{type:"throw",arg:j}}}t.wrap=s;var l={};function h(){}function f(){}function p(){}var d={};c(d,o,function(){return this});var g=Object.getPrototypeOf,v=g&&g(g(x([])));v&&v!==e&&n.call(v,o)&&(d=v);var y=p.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){c(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e(function(r,a){!function r(o,i,a,c){var s=u(t[o],t,i);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,c)})}c(s.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),c(b.prototype,i,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(y),c(y,a,"Generator"),c(y,o,function(){return this}),c(y,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}var J=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(o.a)(this,t),this._stopPromiseResolver=function(){},this.features={},this._negotiateVersion=1,C.a.isRequired(e,"url"),this._logger=Object(C.e)(n.logger),this.baseUrl=this._resolveUrl(e),(n=n||{}).logMessageContent=void 0!==n.logMessageContent&&n.logMessageContent,"boolean"!==typeof n.withCredentials&&void 0!==n.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");n.withCredentials=void 0===n.withCredentials||n.withCredentials,n.timeout=void 0===n.timeout?1e5:n.timeout;var r=null,i=null;if(C.c.isNode){var a=require;r=a("ws"),i=a("eventsource")}C.c.isNode||"undefined"===typeof WebSocket||n.WebSocket?C.c.isNode&&!n.WebSocket&&r&&(n.WebSocket=r):n.WebSocket=WebSocket,C.c.isNode||"undefined"===typeof EventSource||n.EventSource?C.c.isNode&&!n.EventSource&&"undefined"!==typeof i&&(n.EventSource=i):n.EventSource=EventSource,this._httpClient=n.httpClient||new R(this._logger),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=n,this.onreceive=null,this.onclose=null}return Object(i.a)(t,[{key:"start",value:function(){var t=Object(l.a)(K().mark(function t(e){var n,r;return K().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=e||N.Binary,C.a.isIn(e,N,"transferFormat"),this._logger.log(S.a.Debug,"Starting connection with transfer format '".concat(N[e],"'.")),"Disconnected"===this._connectionState){t.next=5;break}return t.abrupt("return",Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state.")));case 5:return this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),t.next=9,this._startInternalPromise;case 9:if("Disconnecting"!==this._connectionState){t.next=17;break}return n="Failed to start the HttpConnection before stop() was called.",this._logger.log(S.a.Error,n),t.next=14,this._stopPromise;case 14:return t.abrupt("return",Promise.reject(new Error(n)));case 17:if("Connected"===this._connectionState){t.next=21;break}return r="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!",this._logger.log(S.a.Error,r),t.abrupt("return",Promise.reject(new Error(r)));case 21:this._connectionStarted=!0;case 22:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"send",value:function(t){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new X(this.transport)),this._sendQueue.send(t))}},{key:"stop",value:function(){var t=Object(l.a)(K().mark(function t(e){var n=this;return K().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("Disconnected"!==this._connectionState){t.next=3;break}return this._logger.log(S.a.Debug,"Call to HttpConnection.stop(".concat(e,") ignored because the connection is already in the disconnected state.")),t.abrupt("return",Promise.resolve());case 3:if("Disconnecting"!==this._connectionState){t.next=6;break}return this._logger.log(S.a.Debug,"Call to HttpConnection.stop(".concat(e,") ignored because the connection is already in the disconnecting state.")),t.abrupt("return",this._stopPromise);case 6:return this._connectionState="Disconnecting",this._stopPromise=new Promise(function(t){n._stopPromiseResolver=t}),t.next=10,this._stopInternal(e);case 10:return t.next=12,this._stopPromise;case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_stopInternal",value:function(){var t=Object(l.a)(K().mark(function t(e){return K().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._stopError=e,t.prev=1,t.next=4,this._startInternalPromise;case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:if(!this.transport){t.next=21;break}return t.prev=9,t.next=12,this.transport.stop();case 12:t.next=18;break;case 14:t.prev=14,t.t1=t.catch(9),this._logger.log(S.a.Error,"HttpConnection.transport.stop() threw error '".concat(t.t1,"'.")),this._stopConnection();case 18:this.transport=void 0,t.next=22;break;case 21:this._logger.log(S.a.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.");case 22:case"end":return t.stop()}},t,this,[[1,6],[9,14]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_startInternal",value:function(){var t=Object(l.a)(K().mark(function t(e){var n,r,o,i=this;return K().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.baseUrl,this._accessTokenFactory=this._options.accessTokenFactory,t.prev=2,!this._options.skipNegotiation){t.next=13;break}if(this._options.transport!==P.WebSockets){t.next=10;break}return this.transport=this._constructTransport(P.WebSockets),t.next=8,this._startTransport(n,e);case 8:t.next=11;break;case 10:throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 11:t.next=32;break;case 13:r=null,o=0;case 15:return t.next=17,this._getNegotiationResponse(n);case 17:if(r=t.sent,"Disconnecting"!==this._connectionState&&"Disconnected"!==this._connectionState){t.next=20;break}throw new Error("The connection was stopped during negotiation.");case 20:if(!r.error){t.next=22;break}throw new Error(r.error);case 22:if(!r.ProtocolVersion){t.next=24;break}throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");case 24:r.url&&(n=r.url),r.accessToken&&function(){var t=r.accessToken;i._accessTokenFactory=function(){return t}}(),o++;case 27:if(r.url&&o<100){t.next=15;break}case 28:if(100!==o||!r.url){t.next=30;break}throw new Error("Negotiate redirection limit exceeded.");case 30:return t.next=32,this._createTransport(n,this._options.transport,r,e);case 32:this.transport instanceof W&&(this.features.inherentKeepAlive=!0),"Connecting"===this._connectionState&&(this._logger.log(S.a.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected"),t.next=43;break;case 36:return t.prev=36,t.t0=t.catch(2),this._logger.log(S.a.Error,"Failed to start the connection: "+t.t0),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),t.abrupt("return",Promise.reject(t.t0));case 43:case"end":return t.stop()}},t,this,[[2,36]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_getNegotiationResponse",value:function(){var t=Object(l.a)(K().mark(function t(e){var n,o,i,a,c,s,l,h,f,p;return K().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n={},!this._accessTokenFactory){t.next=6;break}return t.next=4,this._accessTokenFactory();case 4:(o=t.sent)&&(n[A.Authorization]="Bearer ".concat(o));case 6:return i=Object(C.i)(),a=Object(u.a)(i,2),c=a[0],s=a[1],n[c]=s,l=this._resolveNegotiateUrl(e),this._logger.log(S.a.Debug,"Sending negotiation request: ".concat(l,".")),t.prev=10,t.next=13,this._httpClient.post(l,{content:"",headers:Object(r.a)({},n,this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});case 13:if(200===(h=t.sent).statusCode){t.next=16;break}return t.abrupt("return",Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(h.statusCode,"'"))));case 16:return(!(f=JSON.parse(h.content)).negotiateVersion||f.negotiateVersion<1)&&(f.connectionToken=f.connectionId),t.abrupt("return",f);case 21:return t.prev=21,t.t0=t.catch(10),p="Failed to complete negotiation with the server: "+t.t0,t.t0 instanceof y&&404===t.t0.statusCode&&(p+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(S.a.Error,p),t.abrupt("return",Promise.reject(new E(p)));case 27:case"end":return t.stop()}},t,this,[[10,21]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_createConnectUrl",value:function(t,e){return e?t+(-1===t.indexOf("?")?"?":"&")+"id=".concat(e):t}},{key:"_createTransport",value:function(){var t=Object(l.a)(K().mark(function t(e,n,r,o){var i,a,c,s,u,l,h,f,p;return K().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this._createConnectUrl(e,r.connectionToken),!this._isITransport(n)){t.next=8;break}return this._logger.log(S.a.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=n,t.next=6,this._startTransport(i,o);case 6:return this.connectionId=r.connectionId,t.abrupt("return");case 8:a=[],c=r.availableTransports||[],s=r,u=z(c),t.prev=12,u.s();case 14:if((l=u.n()).done){t.next=53;break}if(h=l.value,!((f=this._resolveTransportOrError(h,n,o))instanceof Error)){t.next=22;break}a.push("".concat(h.transport," failed:")),a.push(f),t.next=51;break;case 22:if(!this._isITransport(f)){t.next=51;break}if(this.transport=f,s){t.next=35;break}return t.prev=25,t.next=28,this._getNegotiationResponse(e);case 28:s=t.sent,t.next=34;break;case 31:return t.prev=31,t.t0=t.catch(25),t.abrupt("return",Promise.reject(t.t0));case 34:i=this._createConnectUrl(e,s.connectionToken);case 35:return t.prev=35,t.next=38,this._startTransport(i,o);case 38:return this.connectionId=s.connectionId,t.abrupt("return");case 42:if(t.prev=42,t.t1=t.catch(35),this._logger.log(S.a.Error,"Failed to start the transport '".concat(h.transport,"': ").concat(t.t1)),s=void 0,a.push(new k("".concat(h.transport," failed: ").concat(t.t1),P[h.transport])),"Connecting"===this._connectionState){t.next=51;break}return p="Failed to select transport before stop() was called.",this._logger.log(S.a.Debug,p),t.abrupt("return",Promise.reject(new Error(p)));case 51:t.next=14;break;case 53:t.next=58;break;case 55:t.prev=55,t.t2=t.catch(12),u.e(t.t2);case 58:return t.prev=58,u.f(),t.finish(58);case 61:if(!(a.length>0)){t.next=63;break}return t.abrupt("return",Promise.reject(new x("Unable to connect to the server with any of the available transports. ".concat(a.join(" ")),a)));case 63:return t.abrupt("return",Promise.reject(new Error("None of the transports supported by the client are supported by the server.")));case 64:case"end":return t.stop()}},t,this,[[12,55,58,61],[25,31],[35,42]])}));return function(e,n,r,o){return t.apply(this,arguments)}}()},{key:"_constructTransport",value:function(t){switch(t){case P.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new q(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case P.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new U(this._httpClient,this._accessTokenFactory,this._logger,this._options);case P.LongPolling:return new W(this._httpClient,this._accessTokenFactory,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(t,"."))}}},{key:"_startTransport",value:function(t,e){var n=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=function(t){return n._stopConnection(t)},this.transport.connect(t,e)}},{key:"_resolveTransportOrError",value:function(t,e,n){var r=P[t.transport];if(null===r||void 0===r)return this._logger.log(S.a.Debug,"Skipping transport '".concat(t.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(t.transport,"' because it is not supported by this client."));if(!function(t,e){return!t||0!==(e&t)}(e,r))return this._logger.log(S.a.Debug,"Skipping transport '".concat(P[r],"' because it was disabled by the client.")),new w("'".concat(P[r],"' is disabled by the client."),r);if(!(t.transferFormats.map(function(t){return N[t]}).indexOf(n)>=0))return this._logger.log(S.a.Debug,"Skipping transport '".concat(P[r],"' because it does not support the requested transfer format '").concat(N[n],"'.")),new Error("'".concat(P[r],"' does not support ").concat(N[n],"."));if(r===P.WebSockets&&!this._options.WebSocket||r===P.ServerSentEvents&&!this._options.EventSource)return this._logger.log(S.a.Debug,"Skipping transport '".concat(P[r],"' because it is not supported in your environment.'")),new _("'".concat(P[r],"' is not supported in your environment."),r);this._logger.log(S.a.Debug,"Selecting transport '".concat(P[r],"'."));try{return this._constructTransport(r)}catch(o){return o}}},{key:"_isITransport",value:function(t){return t&&"object"===typeof t&&"connect"in t}},{key:"_stopConnection",value:function(t){var e=this;if(this._logger.log(S.a.Debug,"HttpConnection.stopConnection(".concat(t,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,t=this._stopError||t,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(S.a.Warning,"Call to HttpConnection.stopConnection(".concat(t,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(t,") was called while the connection is still in the connecting state."));if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),t?this._logger.log(S.a.Error,"Connection disconnected with error '".concat(t,"'.")):this._logger.log(S.a.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(function(t){e._logger.log(S.a.Error,"TransportSendQueue.stop() threw error '".concat(t,"'."))}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(n){this._logger.log(S.a.Error,"HttpConnection.onclose(".concat(t,") threw error '").concat(n,"'."))}}}else this._logger.log(S.a.Debug,"Call to HttpConnection.stopConnection(".concat(t,") was ignored because the connection is already in the disconnected state."))}},{key:"_resolveUrl",value:function(t){if(0===t.lastIndexOf("https://",0)||0===t.lastIndexOf("http://",0))return t;if(!C.c.isBrowser)throw new Error("Cannot resolve '".concat(t,"'."));var e=window.document.createElement("a");return e.href=t,this._logger.log(S.a.Information,"Normalizing '".concat(t,"' to '").concat(e.href,"'.")),e.href}},{key:"_resolveNegotiateUrl",value:function(t){var e=t.indexOf("?"),n=t.substring(0,-1===e?t.length:e);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",-1===(n+=-1===e?"":t.substring(e)).indexOf("negotiateVersion")&&(n+=-1===e?"?":"&",n+="negotiateVersion="+this._negotiateVersion),n}}]),t}();var X=function(){function t(e){Object(o.a)(this,t),this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new V,this._transportResult=new V,this._sendLoopPromise=this._sendLoop()}return Object(i.a)(t,[{key:"send",value:function(t){return this._bufferData(t),this._transportResult||(this._transportResult=new V),this._transportResult.promise}},{key:"stop",value:function(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}},{key:"_bufferData",value:function(t){if(this._buffer.length&&typeof this._buffer[0]!==typeof t)throw new Error("Expected data to be of type ".concat(typeof this._buffer," but was of type ").concat(typeof t));this._buffer.push(t),this._sendBufferedData.resolve()}},{key:"_sendLoop",value:function(){var e=Object(l.a)(K().mark(function e(){var n,r;return K().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this._sendBufferedData.promise;case 3:if(this._executing){e.next=6;break}return this._transportResult&&this._transportResult.reject("Connection stopped."),e.abrupt("break",22);case 6:return this._sendBufferedData=new V,n=this._transportResult,this._transportResult=void 0,r="string"===typeof this._buffer[0]?this._buffer.join(""):t._concatBuffers(this._buffer),this._buffer.length=0,e.prev=11,e.next=14,this._transport.send(r);case 14:n.resolve(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),n.reject(e.t0);case 20:e.next=0;break;case 22:case"end":return e.stop()}},e,this,[[11,17]])}));return function(){return e.apply(this,arguments)}}()}],[{key:"_concatBuffers",value:function(t){var e,n=t.map(function(t){return t.byteLength}).reduce(function(t,e){return t+e}),r=new Uint8Array(n),o=0,i=z(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;r.set(new Uint8Array(a),o),o+=a.byteLength}}catch(c){i.e(c)}finally{i.f()}return r.buffer}}]),t}(),V=function(){function t(){var e=this;Object(o.a)(this,t),this.promise=new Promise(function(t,n){var r;return r=[t,n],e._resolver=r[0],e._rejecter=r[1],r})}return Object(i.a)(t,[{key:"resolve",value:function(){this._resolver()}},{key:"reject",value:function(t){this._rejecter(t)}}]),t}(),Q=function(){function t(){Object(o.a)(this,t)}return Object(i.a)(t,null,[{key:"write",value:function(e){return"".concat(e).concat(t.RecordSeparator)}},{key:"parse",value:function(e){if(e[e.length-1]!==t.RecordSeparator)throw new Error("Message is incomplete.");var n=e.split(t.RecordSeparator);return n.pop(),n}}]),t}();Q.RecordSeparatorCode=30,Q.RecordSeparator=String.fromCharCode(Q.RecordSeparatorCode);var $,Z=function(){function t(){Object(o.a)(this,t)}return Object(i.a)(t,[{key:"writeHandshakeRequest",value:function(t){return Q.write(JSON.stringify(t))}},{key:"parseHandshakeResponse",value:function(t){var e,n;if(Object(C.j)(t)){var r=new Uint8Array(t),o=r.indexOf(Q.RecordSeparatorCode);if(-1===o)throw new Error("Message is incomplete.");var i=o+1;e=String.fromCharCode.apply(null,Array.prototype.slice.call(r.slice(0,i))),n=r.byteLength>i?r.slice(i).buffer:null}else{var a=t,c=a.indexOf(Q.RecordSeparator);if(-1===c)throw new Error("Message is incomplete.");var s=c+1;e=a.substring(0,s),n=a.length>s?a.substring(s):null}var u=Q.parse(e),l=JSON.parse(u[0]);if(l.type)throw new Error("Expected a handshake response from the server.");return[n,l]}}]),t}();function tt(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return et(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}!function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close"}($||($={}));var nt=function(){function t(){Object(o.a)(this,t),this.observers=[]}return Object(i.a)(t,[{key:"next",value:function(t){var e,n=tt(this.observers);try{for(n.s();!(e=n.n()).done;){e.value.next(t)}}catch(r){n.e(r)}finally{n.f()}}},{key:"error",value:function(t){var e,n=tt(this.observers);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.error&&r.error(t)}}catch(t){n.e(t)}finally{n.f()}}},{key:"complete",value:function(){var t,e=tt(this.observers);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.complete&&n.complete()}}catch(r){e.e(r)}finally{e.f()}}},{key:"subscribe",value:function(t){return this.observers.push(t),new C.d(this,t)}}]),t}();function rt(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return ot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function it(){it=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(j){c=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new E(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return O()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=_(a,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(j){return{type:"throw",arg:j}}}t.wrap=s;var l={};function h(){}function f(){}function p(){}var d={};c(d,o,function(){return this});var g=Object.getPrototypeOf,v=g&&g(g(x([])));v&&v!==e&&n.call(v,o)&&(d=v);var y=p.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach(function(e){c(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e(function(r,a){!function r(o,i,a,c){var s=u(t[o],t,i);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,c)})}c(s.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),c(b.prototype,i,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(y),c(y,a,"Generator"),c(y,o,function(){return this}),c(y,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}var at,ct=3e4,st=15e3;!function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"}(at||(at={}));var ut=function(){function t(e,n,r,i){var a=this;Object(o.a)(this,t),this._nextKeepAlive=0,this._freezeEventListener=function(){a._logger.log(S.a.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},C.a.isRequired(e,"connection"),C.a.isRequired(n,"logger"),C.a.isRequired(r,"protocol"),this.serverTimeoutInMilliseconds=ct,this.keepAliveIntervalInMilliseconds=st,this._logger=n,this._protocol=r,this.connection=e,this._reconnectPolicy=i,this._handshakeProtocol=new Z,this.connection.onreceive=function(t){return a._processIncomingData(t)},this.connection.onclose=function(t){return a._connectionClosed(t)},this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=at.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:$.Ping})}return Object(i.a)(t,[{key:"start",value:function(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}},{key:"_startWithStateTransitions",value:function(){var t=Object(l.a)(it().mark(function t(){return it().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._connectionState===at.Disconnected){t.next=2;break}return t.abrupt("return",Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state.")));case 2:return this._connectionState=at.Connecting,this._logger.log(S.a.Debug,"Starting HubConnection."),t.prev=4,t.next=7,this._startInternal();case 7:C.c.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=at.Connected,this._connectionStarted=!0,this._logger.log(S.a.Debug,"HubConnection connected successfully."),t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(4),this._connectionState=at.Disconnected,this._logger.log(S.a.Debug,"HubConnection failed to start successfully because of error '".concat(t.t0,"'.")),t.abrupt("return",Promise.reject(t.t0));case 18:case"end":return t.stop()}},t,this,[[4,13]])}));return function(){return t.apply(this,arguments)}}()},{key:"_startInternal",value:function(){var t=Object(l.a)(it().mark(function t(){var e,n,r=this;return it().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1,e=new Promise(function(t,e){r._handshakeResolver=t,r._handshakeRejecter=e}),t.next=5,this.connection.start(this._protocol.transferFormat);case 5:return t.prev=5,n={protocol:this._protocol.name,version:this._protocol.version},this._logger.log(S.a.Debug,"Sending handshake request."),t.next=10,this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n));case 10:return this._logger.log(S.a.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),t.next=16,e;case 16:if(!this._stopDuringStartError){t.next=18;break}throw this._stopDuringStartError;case 18:t.next=28;break;case 20:return t.prev=20,t.t0=t.catch(5),this._logger.log(S.a.Debug,"Hub handshake failed with error '".concat(t.t0,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),t.next=27,this.connection.stop(t.t0);case 27:throw t.t0;case 28:case"end":return t.stop()}},t,this,[[5,20]])}));return function(){return t.apply(this,arguments)}}()},{key:"stop",value:function(){var t=Object(l.a)(it().mark(function t(){var e;return it().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this._startPromise,this._stopPromise=this._stopInternal(),t.next=4,this._stopPromise;case 4:return t.prev=4,t.next=7,e;case 7:t.next=11;break;case 9:t.prev=9,t.t0=t.catch(4);case 11:case"end":return t.stop()}},t,this,[[4,9]])}));return function(){return t.apply(this,arguments)}}()},{key:"_stopInternal",value:function(t){return this._connectionState===at.Disconnected?(this._logger.log(S.a.Debug,"Call to HubConnection.stop(".concat(t,") ignored because it is already in the disconnected state.")),Promise.resolve()):this._connectionState===at.Disconnecting?(this._logger.log(S.a.Debug,"Call to HttpConnection.stop(".concat(t,") ignored because the connection is already in the disconnecting state.")),this._stopPromise):(this._connectionState=at.Disconnecting,this._logger.log(S.a.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(S.a.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=t||new Error("The connection was stopped before the hub handshake could complete."),this.connection.stop(t)))}},{key:"stream",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i,a=this._replaceStreamingParams(r),c=Object(u.a)(a,2),s=c[0],l=c[1],h=this._createStreamInvocation(t,r,l),f=new nt;return f.cancelCallback=function(){var t=e._createCancelInvocation(h.invocationId);return delete e._callbacks[h.invocationId],i.then(function(){return e._sendWithProtocol(t)})},this._callbacks[h.invocationId]=function(t,e){e?f.error(e):t&&(t.type===$.Completion?t.error?f.error(new Error(t.error)):f.complete():f.next(t.item))},i=this._sendWithProtocol(h).catch(function(t){f.error(t),delete e._callbacks[h.invocationId]}),this._launchStreams(s,i),f}},{key:"_sendMessage",value:function(t){return this._resetKeepAliveInterval(),this.connection.send(t)}},{key:"_sendWithProtocol",value:function(t){return this._sendMessage(this._protocol.writeMessage(t))}},{key:"send",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=this._replaceStreamingParams(n),i=Object(u.a)(o,2),a=i[0],c=i[1],s=this._sendWithProtocol(this._createInvocation(t,n,!0,c));return this._launchStreams(a,s),s}},{key:"invoke",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=this._replaceStreamingParams(r),a=Object(u.a)(i,2),c=a[0],s=a[1],l=this._createInvocation(t,r,!1,s);return new Promise(function(t,n){e._callbacks[l.invocationId]=function(e,r){r?n(r):e&&(e.type===$.Completion?e.error?n(new Error(e.error)):t(e.result):n(new Error("Unexpected message type: ".concat(e.type))))};var r=e._sendWithProtocol(l).catch(function(t){n(t),delete e._callbacks[l.invocationId]});e._launchStreams(c,r)})}},{key:"on",value:function(t,e){t&&e&&(t=t.toLowerCase(),this._methods[t]||(this._methods[t]=[]),-1===this._methods[t].indexOf(e)&&this._methods[t].push(e))}},{key:"off",value:function(t,e){if(t){t=t.toLowerCase();var n=this._methods[t];if(n)if(e){var r=n.indexOf(e);-1!==r&&(n.splice(r,1),0===n.length&&delete this._methods[t])}else delete this._methods[t]}}},{key:"onclose",value:function(t){t&&this._closedCallbacks.push(t)}},{key:"onreconnecting",value:function(t){t&&this._reconnectingCallbacks.push(t)}},{key:"onreconnected",value:function(t){t&&this._reconnectedCallbacks.push(t)}},{key:"_processIncomingData",value:function(t){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(t=this._processHandshakeResponse(t),this._receivedHandshakeResponse=!0),t){var e,n=rt(this._protocol.parseMessages(t,this._logger));try{for(n.s();!(e=n.n()).done;){var r=e.value;switch(r.type){case $.Invocation:this._invokeClientMethod(r);break;case $.StreamItem:case $.Completion:var o=this._callbacks[r.invocationId];if(o){r.type===$.Completion&&delete this._callbacks[r.invocationId];try{o(r)}catch(a){this._logger.log(S.a.Error,"Stream callback threw error: ".concat(Object(C.g)(a)))}}break;case $.Ping:break;case $.Close:this._logger.log(S.a.Information,"Close message received from server.");var i=r.error?new Error("Server returned an error on close: "+r.error):void 0;!0===r.allowReconnect?this.connection.stop(i):this._stopPromise=this._stopInternal(i);break;default:this._logger.log(S.a.Warning,"Invalid message type: ".concat(r.type,"."))}}}catch(c){n.e(c)}finally{n.f()}}this._resetTimeoutPeriod()}},{key:"_processHandshakeResponse",value:function(t){var e,n;try{var r=this._handshakeProtocol.parseHandshakeResponse(t),o=Object(u.a)(r,2);n=o[0],e=o[1]}catch(l){var i="Error parsing handshake response: "+l;this._logger.log(S.a.Error,i);var a=new Error(i);throw this._handshakeRejecter(a),a}if(e.error){var c="Server returned handshake error: "+e.error;this._logger.log(S.a.Error,c);var s=new Error(c);throw this._handshakeRejecter(s),s}return this._logger.log(S.a.Debug,"Server handshake complete."),this._handshakeResolver(),n}},{key:"_resetKeepAliveInterval",value:function(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}},{key:"_resetTimeoutPeriod",value:function(){var t=this;if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(function(){return t.serverTimeout()},this.serverTimeoutInMilliseconds),void 0===this._pingServerHandle)){var e=this._nextKeepAlive-(new Date).getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(Object(l.a)(it().mark(function e(){return it().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t._connectionState!==at.Connected){e.next=9;break}return e.prev=1,e.next=4,t._sendMessage(t._cachedPingMessage);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),t._cleanupPingTimer();case 9:case"end":return e.stop()}},e,null,[[1,6]])})),e)}}},{key:"serverTimeout",value:function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}},{key:"_invokeClientMethod",value:function(t){var e=this,n=this._methods[t.target.toLowerCase()];if(n){try{n.forEach(function(n){return n.apply(e,t.arguments)})}catch(o){this._logger.log(S.a.Error,"A callback for the method ".concat(t.target.toLowerCase()," threw error '").concat(o,"'."))}if(t.invocationId){var r="Server requested a response, which is not supported in this version of the client.";this._logger.log(S.a.Error,r),this._stopPromise=this._stopInternal(new Error(r))}}else this._logger.log(S.a.Warning,"No client method with the name '".concat(t.target,"' found."))}},{key:"_connectionClosed",value:function(t){this._logger.log(S.a.Debug,"HubConnection.connectionClosed(".concat(t,") called while in state ").concat(this._connectionState,".")),this._stopDuringStartError=this._stopDuringStartError||t||new Error("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===at.Disconnecting?this._completeClose(t):this._connectionState===at.Connected&&this._reconnectPolicy?this._reconnect(t):this._connectionState===at.Connected&&this._completeClose(t)}},{key:"_completeClose",value:function(t){var e=this;if(this._connectionStarted){this._connectionState=at.Disconnected,this._connectionStarted=!1,C.c.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(function(n){return n.apply(e,[t])})}catch(n){this._logger.log(S.a.Error,"An onclose callback called with error '".concat(t,"' threw error '").concat(n,"'."))}}}},{key:"_reconnect",value:function(){var t=Object(l.a)(it().mark(function t(e){var n,r,o,i,a=this;return it().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Date.now(),r=0,o=void 0!==e?e:new Error("Attempting to reconnect due to a unknown error."),null!==(i=this._getNextRetryDelay(r++,0,o))){t.next=8;break}return this._logger.log(S.a.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e),t.abrupt("return");case 8:if(this._connectionState=at.Reconnecting,e?this._logger.log(S.a.Information,"Connection reconnecting because of error '".concat(e,"'.")):this._logger.log(S.a.Information,"Connection reconnecting."),0===this._reconnectingCallbacks.length){t.next=15;break}try{this._reconnectingCallbacks.forEach(function(t){return t.apply(a,[e])})}catch(c){this._logger.log(S.a.Error,"An onreconnecting callback called with error '".concat(e,"' threw error '").concat(c,"'."))}if(this._connectionState===at.Reconnecting){t.next=15;break}return this._logger.log(S.a.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting."),t.abrupt("return");case 15:if(null===i){t.next=43;break}return this._logger.log(S.a.Information,"Reconnect attempt number ".concat(r," will start in ").concat(i," ms.")),t.next=19,new Promise(function(t){a._reconnectDelayHandle=setTimeout(t,i)});case 19:if(this._reconnectDelayHandle=void 0,this._connectionState===at.Reconnecting){t.next=23;break}return this._logger.log(S.a.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting."),t.abrupt("return");case 23:return t.prev=23,t.next=26,this._startInternal();case 26:if(this._connectionState=at.Connected,this._logger.log(S.a.Information,"HubConnection reconnected successfully."),0!==this._reconnectedCallbacks.length)try{this._reconnectedCallbacks.forEach(function(t){return t.apply(a,[a.connection.connectionId])})}catch(c){this._logger.log(S.a.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(c,"'."))}return t.abrupt("return");case 32:if(t.prev=32,t.t0=t.catch(23),this._logger.log(S.a.Information,"Reconnect attempt failed because of error '".concat(t.t0,"'.")),this._connectionState===at.Reconnecting){t.next=39;break}return this._logger.log(S.a.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),this._connectionState===at.Disconnecting&&this._completeClose(),t.abrupt("return");case 39:o=t.t0 instanceof Error?t.t0:new Error(t.t0.toString()),i=this._getNextRetryDelay(r++,Date.now()-n,o);case 41:t.next=15;break;case 43:this._logger.log(S.a.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-n," ms and ").concat(r," failed attempts. Connection disconnecting.")),this._completeClose();case 45:case"end":return t.stop()}},t,this,[[23,32]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_getNextRetryDelay",value:function(t,e,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:e,previousRetryCount:t,retryReason:n})}catch(r){return this._logger.log(S.a.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(t,", ").concat(e,") threw error '").concat(r,"'.")),null}}},{key:"_cancelCallbacksWithError",value:function(t){var e=this,n=this._callbacks;this._callbacks={},Object.keys(n).forEach(function(r){var o=n[r];try{o(null,t)}catch(i){e._logger.log(S.a.Error,"Stream 'error' callback called with '".concat(t,"' threw error: ").concat(Object(C.g)(i)))}})}},{key:"_cleanupPingTimer",value:function(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}},{key:"_cleanupTimeout",value:function(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}},{key:"_createInvocation",value:function(t,e,n,r){if(n)return 0!==r.length?{arguments:e,streamIds:r,target:t,type:$.Invocation}:{arguments:e,target:t,type:$.Invocation};var o=this._invocationId;return this._invocationId++,0!==r.length?{arguments:e,invocationId:o.toString(),streamIds:r,target:t,type:$.Invocation}:{arguments:e,invocationId:o.toString(),target:t,type:$.Invocation}}},{key:"_launchStreams",value:function(t,e){var n=this;if(0!==t.length){e||(e=Promise.resolve());var r=function(r){t[r].subscribe({complete:function(){e=e.then(function(){return n._sendWithProtocol(n._createCompletionMessage(r))})},error:function(t){var o;o=t instanceof Error?t.message:t&&t.toString?t.toString():"Unknown error",e=e.then(function(){return n._sendWithProtocol(n._createCompletionMessage(r,o))})},next:function(t){e=e.then(function(){return n._sendWithProtocol(n._createStreamItemMessage(r,t))})}})};for(var o in t)r(o)}}},{key:"_replaceStreamingParams",value:function(t){for(var e=[],n=[],r=0;r<t.length;r++){var o=t[r];if(this._isObservable(o)){var i=this._invocationId;this._invocationId++,e[i]=o,n.push(i.toString()),t.splice(r,1)}}return[e,n]}},{key:"_isObservable",value:function(t){return t&&t.subscribe&&"function"===typeof t.subscribe}},{key:"_createStreamInvocation",value:function(t,e,n){var r=this._invocationId;return this._invocationId++,0!==n.length?{arguments:e,invocationId:r.toString(),streamIds:n,target:t,type:$.StreamInvocation}:{arguments:e,invocationId:r.toString(),target:t,type:$.StreamInvocation}}},{key:"_createCancelInvocation",value:function(t){return{invocationId:t,type:$.CancelInvocation}}},{key:"_createStreamItemMessage",value:function(t,e){return{invocationId:t,item:e,type:$.StreamItem}}},{key:"_createCompletionMessage",value:function(t,e,n){return e?{error:e,invocationId:t,type:$.Completion}:{invocationId:t,result:n,type:$.Completion}}},{key:"state",get:function(){return this._connectionState}},{key:"connectionId",get:function(){return this.connection&&this.connection.connectionId||null}},{key:"baseUrl",get:function(){return this.connection.baseUrl||""},set:function(t){if(this._connectionState!==at.Disconnected&&this._connectionState!==at.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t}}],[{key:"create",value:function(e,n,r,o){return new t(e,n,r,o)}}]),t}(),lt=n(452);function ht(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return ft(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var pt="json",dt=function(){function t(){Object(o.a)(this,t),this.name=pt,this.version=1,this.transferFormat=N.Text}return Object(i.a)(t,[{key:"parseMessages",value:function(t,e){if("string"!==typeof t)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];null===e&&(e=lt.a.instance);var n,r=[],o=ht(Q.parse(t));try{for(o.s();!(n=o.n()).done;){var i=n.value,a=JSON.parse(i);if("number"!==typeof a.type)throw new Error("Invalid payload.");switch(a.type){case $.Invocation:this._isInvocationMessage(a);break;case $.StreamItem:this._isStreamItemMessage(a);break;case $.Completion:this._isCompletionMessage(a);break;case $.Ping:case $.Close:break;default:e.log(S.a.Information,"Unknown message type '"+a.type+"' ignored.");continue}r.push(a)}}catch(c){o.e(c)}finally{o.f()}return r}},{key:"writeMessage",value:function(t){return Q.write(JSON.stringify(t))}},{key:"_isInvocationMessage",value:function(t){this._assertNotEmptyString(t.target,"Invalid payload for Invocation message."),void 0!==t.invocationId&&this._assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")}},{key:"_isStreamItemMessage",value:function(t){if(this._assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),void 0===t.item)throw new Error("Invalid payload for StreamItem message.")}},{key:"_isCompletionMessage",value:function(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this._assertNotEmptyString(t.error,"Invalid payload for Completion message."),this._assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")}},{key:"_assertNotEmptyString",value:function(t,e){if("string"!==typeof t||""===t)throw new Error(e)}}]),t}();n.d(e,"a",function(){return vt});var gt={trace:S.a.Trace,debug:S.a.Debug,info:S.a.Information,information:S.a.Information,warn:S.a.Warning,warning:S.a.Warning,error:S.a.Error,critical:S.a.Critical,none:S.a.None};var vt=function(){function t(){Object(o.a)(this,t)}return Object(i.a)(t,[{key:"configureLogging",value:function(t){if(C.a.isRequired(t,"logging"),void 0!==t.log)this.logger=t;else if("string"===typeof t){var e=function(t){var e=gt[t.toLowerCase()];if("undefined"!==typeof e)return e;throw new Error("Unknown log level: ".concat(t))}(t);this.logger=new C.b(e)}else this.logger=new C.b(t);return this}},{key:"withUrl",value:function(t,e){return C.a.isRequired(t,"url"),C.a.isNotEmpty(t,"url"),this.url=t,this.httpConnectionOptions="object"===typeof e?Object(r.a)({},this.httpConnectionOptions,e):Object(r.a)({},this.httpConnectionOptions,{transport:e}),this}},{key:"withHubProtocol",value:function(t){return C.a.isRequired(t,"protocol"),this.protocol=t,this}},{key:"withAutomaticReconnect",value:function(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new s(t):this.reconnectPolicy=t:this.reconnectPolicy=new s,this}},{key:"build",value:function(){var t=this.httpConnectionOptions||{};if(void 0===t.logger&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var e=new J(this.url,t);return ut.create(e,this.logger||lt.a.instance,this.protocol||new dt,this.reconnectPolicy)}}]),t}()}}]);
//# sourceMappingURL=16.10bba9eb.chunk.js.map